# Unistore Benchmark - Example environment file
# Copy to `.env` and fill in values:
#   cp env.example .env

# -----------------------------------------------------------------------------
# App
# -----------------------------------------------------------------------------
APP_HOST=127.0.0.1
APP_PORT=8000
APP_DEBUG=true
APP_RELOAD=true

# -----------------------------------------------------------------------------
# WebSockets
# -----------------------------------------------------------------------------
WS_PING_INTERVAL=30
WS_PING_TIMEOUT=10

# -----------------------------------------------------------------------------
# Live Metrics (in-memory cache + worker push)
# -----------------------------------------------------------------------------
# LIVE_METRICS_POST_URL defaults to http://APP_HOST:APP_PORT when empty.
LIVE_METRICS_CACHE_TTL_SECONDS=5
LIVE_METRICS_POST_URL=
LIVE_METRICS_POST_TIMEOUT_SECONDS=0.5

# -----------------------------------------------------------------------------
# Credential Encryption
# -----------------------------------------------------------------------------
# 32-character key for AES-256-GCM encryption of stored connection credentials.
# REQUIRED for production. A default key is used if not set (with warning).
# Can be set here or as an environment variable (env var takes precedence).
# FLAKEBENCH_CREDENTIAL_KEY=YourSecure32CharacterKeyHere!!!

# -----------------------------------------------------------------------------
# Snowflake Bootstrap Connection (required)
# -----------------------------------------------------------------------------
# This connection is used for:
#   - Reading/writing the CONNECTIONS table (Settings page)
#   - Storing test results
#   - Schema management
#
# NOTE: Benchmark target connections (Snowflake + Postgres) are configured
# via the Settings page and stored encrypted in the CONNECTIONS table.
#
# IMPORTANT: Using ACCOUNTADMIN is not recommended. See spcs/README.md for
# instructions on creating a dedicated FLAKEBENCH_ROLE with minimal privileges.

SNOWFLAKE_ACCOUNT=your_account.region
SNOWFLAKE_USER=your_username
SNOWFLAKE_PASSWORD=your_password
SNOWFLAKE_WAREHOUSE=COMPUTE_WH
SNOWFLAKE_DATABASE=FLAKEBENCH
SNOWFLAKE_SCHEMA=TEST_RESULTS
SNOWFLAKE_ROLE=FLAKEBENCH_ROLE

# Connection pool (results persistence + UI reads)
SNOWFLAKE_POOL_SIZE=5
SNOWFLAKE_MAX_OVERFLOW=10
SNOWFLAKE_POOL_TIMEOUT=30
SNOWFLAKE_POOL_RECYCLE=3600
SNOWFLAKE_POOL_MAX_PARALLEL_CREATES=8

# Thread pools
# - Results executor: persistence + UI reads from results tables
# - Benchmark executor: workload execution (>= requested concurrency to avoid app-side queueing)
SNOWFLAKE_RESULTS_EXECUTOR_MAX_WORKERS=16
SNOWFLAKE_BENCHMARK_EXECUTOR_MAX_WORKERS=256

# Connector timeouts (seconds) - helps uvicorn --reload shutdown cleanly
SNOWFLAKE_CONNECT_LOGIN_TIMEOUT=15
SNOWFLAKE_CONNECT_NETWORK_TIMEOUT=15
SNOWFLAKE_CONNECT_SOCKET_TIMEOUT=15

# Benchmark/workload connector timeouts (seconds)
# Use higher values so we observe DB queueing/slowdowns instead of client-side read timeouts.
SNOWFLAKE_BENCHMARK_CONNECT_LOGIN_TIMEOUT=15
SNOWFLAKE_BENCHMARK_CONNECT_NETWORK_TIMEOUT=60
SNOWFLAKE_BENCHMARK_CONNECT_SOCKET_TIMEOUT=60
